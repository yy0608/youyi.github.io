<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="WEB前端开发,前端开发博客专注于前端开发,分享前端开发资源和前端开发技术资讯等。">
<meta property="og:type" content="website">
<meta property="og:title" content="友谊同学">
<meta property="og:url" content="http://youyi.jingia.com/page/4/index.html">
<meta property="og:site_name" content="友谊同学">
<meta property="og:description" content="WEB前端开发,前端开发博客专注于前端开发,分享前端开发资源和前端开发技术资讯等。">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="友谊同学">
<meta name="twitter:description" content="WEB前端开发,前端开发博客专注于前端开发,分享前端开发资源和前端开发技术资讯等。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://youyi.jingia.com/page/4/"/>





  <title>友谊同学</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">友谊同学</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">记忆不好的友谊同学的技术笔记本</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/11/nodejs-mongodb-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/11/nodejs-mongodb-blog/" itemprop="url">nodejs和mongodb搭建博客（博客开发一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-11T17:26:23+08:00">
                2018-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="本文主要介绍服务端的相关开发，客户端使用vue开发web、react-native开发app、小程序等，本文不做客户端的开发介绍"><a href="#本文主要介绍服务端的相关开发，客户端使用vue开发web、react-native开发app、小程序等，本文不做客户端的开发介绍" class="headerlink" title="本文主要介绍服务端的相关开发，客户端使用vue开发web、react-native开发app、小程序等，本文不做客户端的开发介绍"></a>本文主要介绍服务端的相关开发，客户端使用vue开发web、react-native开发app、小程序等，本文不做客户端的开发介绍</h5><ul>
<li><p>1.目录结构</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.js</span><br><span class="line">- models</span><br><span class="line">  - User.js</span><br><span class="line">- routers</span><br><span class="line">  - main.js</span><br><span class="line">  - api.js</span><br><span class="line">  - admin.js</span><br><span class="line">- schemas</span><br><span class="line">  - users.js</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.app.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;)</span><br><span class="line">var bodyParser = require(&apos;body-parser&apos;)</span><br><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line">var cookies = require(&apos;cookies&apos;)</span><br><span class="line"></span><br><span class="line">// 使用全局的Promise，需要高版本node支持Promise，也可使用bluebird</span><br><span class="line">mongoose.Promise = global.Promise</span><br><span class="line"></span><br><span class="line">var app = express()</span><br><span class="line"></span><br><span class="line">// post请求数据的处理，在req.body</span><br><span class="line">app.use(bodyParser.json())</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; extended: false &#125;))</span><br><span class="line"></span><br><span class="line">// 设置和获取cookies</span><br><span class="line">app.use(function (req, res, next) &#123;</span><br><span class="line">  req.cookies = new cookies(req, res)</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 解决跨域</span><br><span class="line">app.all(&apos;*&apos;, function(req, res, next) &#123;</span><br><span class="line">  res.header(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);</span><br><span class="line">  res.header(&quot;Access-Control-Allow-Headers&quot;, &quot;Content-Type,Content-Length, Authorization, Accept,X-Requested-With&quot;);</span><br><span class="line">  res.header(&quot;Access-Control-Allow-Methods&quot;, &quot;PUT,POST,GET,DELETE,OPTIONS&quot;);</span><br><span class="line">  res.header(&quot;X-Powered-By&quot;, &apos; 3.2.1&apos;)</span><br><span class="line">  // if (req.method == &quot;OPTIONS&quot;) res.sendStatus(200); /*让options请求快速返回*/</span><br><span class="line">  else next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 设置路由组</span><br><span class="line">app.use(&apos;/&apos;, require(&apos;./routers/main.js&apos;))</span><br><span class="line">app.use(&apos;/api&apos;, require(&apos;./routers/api.js&apos;))</span><br><span class="line">app.use(&apos;/admin&apos;, require(&apos;./routers/admin.js&apos;))</span><br><span class="line"></span><br><span class="line">// 连接数据库</span><br><span class="line">mongoose.connect(&apos;mongodb://localhost:27017/laogao&apos;, &#123;</span><br><span class="line">  useMongoClient: true</span><br><span class="line">&#125;, function(err) &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    console.log(&apos;数据库连接失败&apos;)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    console.log(&apos;数据库连接成功&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).catch(err =&gt; &#123;</span><br><span class="line">  console.log(err.message)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// 监听端口，开启服务</span><br><span class="line">app.listen(3000, function(err) &#123;</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    console.log(err)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    console.log(&apos;listen on port 3000&apos;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>3.admin.js，路由组内部写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;)</span><br><span class="line"></span><br><span class="line">var router = express.Router()</span><br><span class="line"></span><br><span class="line">router.get(&apos;/user&apos;, function (req, res, next) &#123;</span><br><span class="line">  res.send(&apos;admin user&apos;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = router</span><br></pre></td></tr></table></figure>
</li>
<li><p>4.schema（数据表）的定义，users.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line">var Schema = mongoose.Schema</span><br><span class="line"></span><br><span class="line">module.exports = new Schema(&#123;</span><br><span class="line">  username: String,</span><br><span class="line">  password: String</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>5.model的写法，User.js</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line">var usersSchema = require(&apos;../schemas/users.js&apos;)</span><br><span class="line"></span><br><span class="line">module.exports = mongoose.model(&apos;User&apos;, usersSchema)</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.api.js登录注册接口对数据库的相关操作，<a href="http://mongoosejs.com/docs/4.x/docs/api.html" target="_blank" rel="noopener">mongoose api地址</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">var express = require(&apos;express&apos;)</span><br><span class="line">var router = express.Router()</span><br><span class="line">var User = require(&apos;../models/User.js&apos;)</span><br><span class="line">var mongoose = require(&apos;mongoose&apos;)</span><br><span class="line">mongoose.Promise = global.Promise</span><br><span class="line"></span><br><span class="line">var responseData</span><br><span class="line"></span><br><span class="line">router.use(function (req, res, next) &#123;</span><br><span class="line">  responseData = &#123;</span><br><span class="line">    code: 0,</span><br><span class="line">    msg: &apos;&apos;</span><br><span class="line">  &#125;</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(&apos;/user/register&apos;, function (req, res, next) &#123;</span><br><span class="line">  var resBody = req.body</span><br><span class="line">  var username = resBody.username</span><br><span class="line">  var password = resBody.password</span><br><span class="line">  if (!resBody) &#123;</span><br><span class="line">    responseData.code = 9</span><br><span class="line">    responseData.msg = &apos;请求数据处理出错&apos;</span><br><span class="line">    res.json(responseData)</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line">  if (username &amp;&amp; !username.trim()) &#123;</span><br><span class="line">    responseData.code = 1</span><br><span class="line">    responseData.msg = &apos;用户名不能为空&apos;</span><br><span class="line">    res.json(responseData)</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line">  if (password &amp;&amp; !password.trim()) &#123;</span><br><span class="line">    responseData.code = 2</span><br><span class="line">    responseData.msg = &apos;密码不能为空&apos;</span><br><span class="line">    res.json(responseData)</span><br><span class="line">  &#125;</span><br><span class="line">  User.findOne(&#123;</span><br><span class="line">    username: username</span><br><span class="line">  &#125;).then(data =&gt; &#123;</span><br><span class="line">    if (data) &#123;</span><br><span class="line">      responseData.code = 3</span><br><span class="line">      responseData.msg = &apos;已有相同用户名&apos;</span><br><span class="line">      return Promise.resolve(responseData)</span><br><span class="line">    &#125; // 没有存在用户名</span><br><span class="line">    var user = new User(&#123;</span><br><span class="line">      username: username,</span><br><span class="line">      password: password</span><br><span class="line">    &#125;)</span><br><span class="line">    return user.save()</span><br><span class="line">  &#125;).then(data =&gt; &#123;</span><br><span class="line">    if (data.code === 3) &#123;</span><br><span class="line">      res.json(data)</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      responseData.msg = &apos;注册成功&apos;</span><br><span class="line">      res.json(responseData)</span><br><span class="line">    &#125;</span><br><span class="line">    return</span><br><span class="line">  &#125;).catch(err =&gt; &#123;</span><br><span class="line">    responseData.code = 9</span><br><span class="line">    responseData.msg = &apos;数据库查找出错&apos;</span><br><span class="line">    res.json(responseData)</span><br><span class="line">    return</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(&apos;/user/login&apos;, function (req, res, next) &#123;</span><br><span class="line">  var resBody = req.body</span><br><span class="line">  var username = resBody.username</span><br><span class="line">  var password = resBody.password</span><br><span class="line">  if (!resBody || !username || !password) &#123;</span><br><span class="line">    responseData.code = 9</span><br><span class="line">    responseData.msg = &apos;请求数据出错&apos;</span><br><span class="line">    res.json(responseData)</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line">  if (username &amp;&amp; !username.trim()) &#123;</span><br><span class="line">    responseData.code = 1</span><br><span class="line">    responseData.msg = &apos;用户名不能为空&apos;</span><br><span class="line">    res.json(responseData)</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line">  if (password &amp;&amp; !password.trim()) &#123;</span><br><span class="line">    responseData.code = 2</span><br><span class="line">    responseData.msg = &apos;密码不能为空&apos;</span><br><span class="line">    res.json(responseData)</span><br><span class="line">  &#125;</span><br><span class="line">  User.findOne(&#123;</span><br><span class="line">    username: username</span><br><span class="line">  &#125;).then(data =&gt; &#123;</span><br><span class="line">    if (!data || data.password !== password) &#123;</span><br><span class="line">      responseData.code = 4</span><br><span class="line">      responseData.msg = &apos;用户名或密码错误&apos;</span><br><span class="line">      res.json(responseData)</span><br><span class="line">      return</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      responseData.msg = &apos;登录成功&apos;</span><br><span class="line">      responseData.user_info = &#123;</span><br><span class="line">        _id: data._id,</span><br><span class="line">        username: data.username</span><br><span class="line">      &#125;</span><br><span class="line">      console.log(req.cookies)</span><br><span class="line">      req.cookies.set(&apos;userInfo&apos;, JSON.stringify(responseData.user_info), &#123; httpOnly: false &#125;) // 此处默认为true，浏览器客户端无法获取。获取的时候服务端使用req.cookies.get(&apos;userInfo&apos;)，客户端使用了vue-cookie（参考文章博客开发三）</span><br><span class="line">      res.json(responseData)</span><br><span class="line">      return</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;).catch(err =&gt; &#123;</span><br><span class="line">    responseData.code = 9</span><br><span class="line">    responseData.msg = &apos;数据库查找出错&apos;</span><br><span class="line">    responseData.error = err</span><br><span class="line">    res.json(responseData)</span><br><span class="line">    return</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">module.exports = router</span><br></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/09/ajax-node-upload/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/09/ajax-node-upload/" itemprop="url">文件ajax异步上传node服务器</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-09T14:47:56+08:00">
                2018-01-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h6 id="ajax上传文件，本文以图片为例，node作为处理服务器"><a href="#ajax上传文件，本文以图片为例，node作为处理服务器" class="headerlink" title="ajax上传文件，本文以图片为例，node作为处理服务器"></a>ajax上传文件，本文以图片为例，node作为处理服务器</h6><h6 id="html文件，XMLHttpRequest-2"><a href="#html文件，XMLHttpRequest-2" class="headerlink" title="html文件，XMLHttpRequest 2"></a>html文件，XMLHttpRequest 2</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot;&gt;</span><br><span class="line">  &lt;button id=&quot;upload&quot;&gt;上传&lt;/button&gt;</span><br><span class="line">  &lt;div id=&quot;progress&quot;&gt;0&lt;/div&gt;</span><br><span class="line">  &lt;img src=&quot;&quot; width=&quot;200&quot; id=&quot;image&quot;&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">;(function () &#123;</span><br><span class="line">  &apos;use strict&apos;</span><br><span class="line"></span><br><span class="line">  var xhr = new XMLHttpRequest()</span><br><span class="line"></span><br><span class="line">  upload.addEventListener(&apos;click&apos;, uploadFile, false)</span><br><span class="line">  file.addEventListener(&apos;change&apos;, previewImage, false)</span><br><span class="line"></span><br><span class="line">  function uploadFile () &#123;</span><br><span class="line">    var formData = new FormData()</span><br><span class="line">    formData.append(&apos;test-upload&apos;, file.files[0])</span><br><span class="line">    xhr.onload = uploadSuccess</span><br><span class="line">    xhr.upload.onprogress = setProgress</span><br><span class="line"></span><br><span class="line">    xhr.open(&apos;post&apos;, &apos;/upload&apos;, true)</span><br><span class="line"></span><br><span class="line">    xhr.send(formData)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function uploadSuccess () &#123;</span><br><span class="line">    if (xhr.readyState === 4) &#123;</span><br><span class="line">      console.log(xhr.responseText)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function setProgress (event) &#123;</span><br><span class="line">    if (event.lengthComputable) &#123;</span><br><span class="line">      var complete = parseInt(event.loaded / event.total * 100)</span><br><span class="line">      progress.innerHTML = complete + &apos;%&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function previewImage (event) &#123;</span><br><span class="line">    var reader = new FileReader()</span><br><span class="line">    reader.onload = function (event) &#123;</span><br><span class="line">      image.src = event.target.result</span><br><span class="line">    &#125;</span><br><span class="line">    reader.readAsDataURL(event.target.files[0])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)()</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h6 id="node服务端文件，express和multer中间件"><a href="#node服务端文件，express和multer中间件" class="headerlink" title="node服务端文件，express和multer中间件"></a>node服务端文件，express和multer中间件</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">const express = require(&apos;express&apos;)</span><br><span class="line">const upload = require(&apos;multer&apos;)(&#123; dest: &apos;uploads/&apos; &#125;)</span><br><span class="line"></span><br><span class="line">const path = require(&apos;path&apos;)</span><br><span class="line">const fs = require(&apos;fs&apos;)</span><br><span class="line"></span><br><span class="line">const port = 3000</span><br><span class="line"></span><br><span class="line">let app = express()</span><br><span class="line"></span><br><span class="line">app.set(&apos;port&apos;, port)</span><br><span class="line"></span><br><span class="line">app.use(express.static(&apos;./&apos;))</span><br><span class="line"></span><br><span class="line">app.post(&apos;/upload&apos;, upload.single(&apos;test-upload&apos;), function (req, res) &#123;</span><br><span class="line">  if (!req.file) &#123;</span><br><span class="line">    res.json(&#123; ok: false &#125;)</span><br><span class="line">    return</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(&apos;-------------------------------------------&apos;)</span><br><span class="line">  console.log(req.file)</span><br><span class="line">  console.log(&apos;-------------------------------------------&apos;)</span><br><span class="line"></span><br><span class="line">  res.json(&#123; ok: true &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(port, function () &#123;</span><br><span class="line">  console.log(&apos;listen on port&apos; + port)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/08/touch-event/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/08/touch-event/" itemprop="url">移动端touch事件遇到的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-08T16:10:16+08:00">
                2018-01-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h6 id="touchmove事件在部分安卓手机上只执行一次的问题"><a href="#touchmove事件在部分安卓手机上只执行一次的问题" class="headerlink" title="touchmove事件在部分安卓手机上只执行一次的问题"></a>touchmove事件在部分安卓手机上只执行一次的问题</h6><blockquote>
<p>主要是由于200ms超时导致内核不一定会一直处理touchmove事件，一旦超时会将后续所有的事件转交给UI处理，导致touchmove不会一直触发。</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.preventDefault()</span><br></pre></td></tr></table></figure>
<h6 id="touchmove添加e-preventDefault-，影响页面默认滚动"><a href="#touchmove添加e-preventDefault-，影响页面默认滚动" class="headerlink" title="touchmove添加e.preventDefault()，影响页面默认滚动"></a>touchmove添加e.preventDefault()，影响页面默认滚动</h6><blockquote>
<p>通过判断是垂直滚动还是水平滚动，然后添加组织默认事件</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/06/node-project/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/06/node-project/" itemprop="url">node文件操作之自动化构建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-06T16:17:27+08:00">
                2018-01-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h6 id="使用node自动化生成项目"><a href="#使用node自动化生成项目" class="headerlink" title="使用node自动化生成项目"></a>使用node自动化生成项目</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">var fs = require(&apos;fs&apos;)</span><br><span class="line">var path = require(&apos;path&apos;)</span><br><span class="line"></span><br><span class="line">var project = &#123;</span><br><span class="line">  &apos;name&apos;: &apos;test&apos;,</span><br><span class="line">  &apos;fileData&apos;: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: &apos;css&apos;,</span><br><span class="line">      type: &apos;dir&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: &apos;js&apos;,</span><br><span class="line">      type: &apos;dir&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: &apos;imgs&apos;,</span><br><span class="line">      type: &apos;dir&apos;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      name: &apos;index.html&apos;,</span><br><span class="line">      type: &apos;file&apos;,</span><br><span class="line">      content: &apos;&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\t&lt;head&gt;\n\t&lt;title&gt;title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;aaa&lt;/body&gt;\n&lt;/html&gt;&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">if (project.name) &#123;</span><br><span class="line">  if (fs.existsSync(path.join(__dirname, project.name))) &#123;</span><br><span class="line">    console.log(&apos;文件目录已经存在&apos;)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    fs.mkdir(project.name, function (err) &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        console.log(&apos;创建文件出错&apos;)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        console.log(&apos;创建文件目录成功&apos;)</span><br><span class="line"></span><br><span class="line">        var fileData = project.fileData</span><br><span class="line">        if (fileData &amp;&amp; fileData.forEach) &#123;</span><br><span class="line">          fileData.forEach(function (f) &#123;</span><br><span class="line">            f.path = project.name + &apos;\\&apos; + f.name</span><br><span class="line">            f.content = f.content || &apos;&apos;</span><br><span class="line"></span><br><span class="line">            switch (f.type) &#123;</span><br><span class="line">              case &apos;dir&apos;:</span><br><span class="line">                fs.mkdirSync(f.path)</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">              case &apos;file&apos;:</span><br><span class="line">                fs.writeFileSync(f.path, f.content)</span><br><span class="line">                break</span><br><span class="line"></span><br><span class="line">              default:</span><br><span class="line">                break</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>1.fs.existsSync，判断目录是否存在</li>
<li>2.fs.mkdir，创建目录，可以多层创建，需要上一级目录存在</li>
<li>3.fileData.forEach，判断是否数组的新方法，instanceof，Array.isArray()</li>
<li>4.fs.writeFileSync，写入文件，传路径和内容</li>
</ul>
<h6 id="使用node执行系统命令，可以在目录生成完成之后执行，类似npm-的scripts"><a href="#使用node执行系统命令，可以在目录生成完成之后执行，类似npm-的scripts" class="headerlink" title="使用node执行系统命令，可以在目录生成完成之后执行，类似npm 的scripts"></a>使用node执行系统命令，可以在目录生成完成之后执行，类似npm 的scripts</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var exec = require(&apos;child_process&apos;).exec</span><br><span class="line">var cliCmd = &apos;browser-sync start --server --files &quot;**/*.*&quot;&apos; // ipconfig</span><br><span class="line"></span><br><span class="line">exec(cliCmd, &#123; encoding: &apos;utf8&apos; &#125;, function (err, stdout, stderr) &#123; // 执行系统命令</span><br><span class="line">  if (err) &#123;</span><br><span class="line">    console.log(err)</span><br><span class="line">  &#125; else if (stderr) &#123;</span><br><span class="line">    console.log(stderr)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    console.log(stdout)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/05/css-tech/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/05/css-tech/" itemprop="url">CSS中的一些黑科技技巧</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-05T09:14:15+08:00">
                2018-01-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>1.鼠标移进去不见</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.test &#123;</span><br><span class="line">  cursor: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.文字模糊</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.test &#123;</span><br><span class="line">  color: transparent;</span><br><span class="line">  text-shadow: #111 0 0 5px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>3.多重边框</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.test &#123;</span><br><span class="line">  box-shadow: 0 0 0 6px rgba(0, 0, 0, 0.2), 0 0 0 12px rgba(0, 0, 0, 0.2), 0 0 0 18px rgba(0, 0, 0, 0.2), 0 0 0 24px rgba(0, 0, 0, 0.2);</span><br><span class="line">  height: 200px;</span><br><span class="line">  margin: 50px auto;</span><br><span class="line">  width: 400px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>4.css运算calc， 可用 + - * /，使用时注意加空格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.test &#123;</span><br><span class="line">  width: calc(100% - 20px);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>5.border-radius高级使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.test &#123;</span><br><span class="line">  border-radius: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.test &#123; /* 左，右，下右，下左 */</span><br><span class="line">  border-radius: 10px 20px 30px 40px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.test &#123; /* 斜线前面的影响的是水平方向，斜线后面影响的是垂直方向 */</span><br><span class="line">  border-radius: 5px 5px 3px 2px / 5px 5px 1px 3px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/04/mongodb-study/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/04/mongodb-study/" itemprop="url">mongodb学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-04T17:26:37+08:00">
                2018-01-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>1.安装。使用chocolatey安装，-y是默认提示自动确认</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install mongodb -y</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.将mongodb安装后的bin目录添加到系统环境变量</p>
</li>
<li>3.创建c:\data\db和c:\data\log文件夹</li>
<li><p>4.启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongodb --dbpath c:\data\db</span><br></pre></td></tr></table></figure>
</li>
<li><p>5.命令行中执行mongo语句，打开新命令行窗口</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/03/vue-optimize/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/03/vue-optimize/" itemprop="url">vue多页面优化之seo和路由懒加载</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-03T16:01:41+08:00">
                2018-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h6 id="本文介绍vue使用上的一些优化，seo优化主要两个方面，一个是代码预渲染，另一个是后端渲染。然后是vue-router路由的懒加载（lazy-load），其中会配合webpack2的代码分割（code-spliting），更多内容请自行查找，每一个点都可以深入。"><a href="#本文介绍vue使用上的一些优化，seo优化主要两个方面，一个是代码预渲染，另一个是后端渲染。然后是vue-router路由的懒加载（lazy-load），其中会配合webpack2的代码分割（code-spliting），更多内容请自行查找，每一个点都可以深入。" class="headerlink" title="本文介绍vue使用上的一些优化，seo优化主要两个方面，一个是代码预渲染，另一个是后端渲染。然后是vue-router路由的懒加载（lazy-load），其中会配合webpack2的代码分割（code spliting），更多内容请自行查找，每一个点都可以深入。"></a>本文介绍vue使用上的一些优化，seo优化主要两个方面，一个是代码预渲染，另一个是后端渲染。然后是vue-router路由的懒加载（lazy-load），其中会配合webpack2的代码分割（code spliting），更多内容请自行查找，每一个点都可以深入。</h6><h5 id="一、seo优化之代码预渲染，使用prerender-spa-plugin插件"><a href="#一、seo优化之代码预渲染，使用prerender-spa-plugin插件" class="headerlink" title="一、seo优化之代码预渲染，使用prerender-spa-plugin插件"></a>一、seo优化之代码预渲染，使用prerender-spa-plugin插件</h5><ul>
<li><p>1.安装prerender-spa-plugin</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev prerender-spa-plugin</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.在 build/webpack.prod.conf.js 中引用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var PrerenderSpaPlugin = require(&apos;prerender-spa-plugin&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>3.在 build/webpack.prod.conf.js 中配置 plugins 列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">new PrerenderSpaPlugin(</span><br><span class="line">  // 要编译的目录</span><br><span class="line">  path.join(__dirname, &apos;../dist&apos;),</span><br><span class="line">  // 你要预呈现的列表</span><br><span class="line">  [ &apos;/&apos;, &apos;/aaa&apos;, &apos;/bbb&apos; ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>4.打包比较</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="二、seo优化之服务端渲染ssr，使用vue-server-renderer"><a href="#二、seo优化之服务端渲染ssr，使用vue-server-renderer" class="headerlink" title="二、seo优化之服务端渲染ssr，使用vue-server-renderer"></a>二、seo优化之服务端渲染ssr，使用vue-server-renderer</h5><h5 id="三、vue-router路由懒加载lazy-load，测试和预渲染冲突，懒加载是异步加载的一段js代码"><a href="#三、vue-router路由懒加载lazy-load，测试和预渲染冲突，懒加载是异步加载的一段js代码" class="headerlink" title="三、vue-router路由懒加载lazy-load，测试和预渲染冲突，懒加载是异步加载的一段js代码"></a>三、vue-router路由懒加载lazy-load，测试和预渲染冲突，懒加载是异步加载的一段js代码</h5><ul>
<li><p>1.基本写法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import Router from &apos;vue-router&apos;</span><br><span class="line">Vue.use(Router)</span><br><span class="line"></span><br><span class="line">// webpack按需加载组件(写法一)</span><br><span class="line">const A = r =&gt; require.ensure([], () =&gt; r(require(&apos;@/components/A&apos;)))</span><br><span class="line"></span><br><span class="line">// 路由对应的组件定义成异步组件(写法二)</span><br><span class="line">const A = resolve =&gt; &#123;</span><br><span class="line">  // 空数组用来指定该路由组件需要加载的依赖</span><br><span class="line">  require.ensure([], () =&gt; &#123;</span><br><span class="line">    resolve(require(&apos;@/components/A&apos;))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.按组分块。把多个组件打包到同个异步chunk中，提供require.ensure第三个参数名称</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const A = r =&gt; require.ensure([], require(&apos;@/components/A&apos;), &apos;big-chunks&apos;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="nbsp"><a href="#nbsp" class="headerlink" title="&nbsp;"></a>&nbsp;</h1><blockquote>
<p><em>参考文章，<a href="https://www.jianshu.com/p/abb02075b56b" target="_blank" rel="noopener">Vue.js路由懒加载</a></em>，<a href="https://sebastianblade.com/using-webpack-to-achieve-long-term-cache/" target="_blank" rel="noopener">webpack配置优化</a></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/03/react-native-install-windows/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/03/react-native-install-windows/" itemprop="url">react native在windows环境的安装配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-03T09:26:16+08:00">
                2018-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h6 id="本文主要介绍react-native在windows上开发android的环境搭建，前几天第一次搭建成功过，遇到一些坑，时间过了两天，可能有一些遗漏，有问题请自行搜索或在关于页面联系我。早前是使用mac开发iOS的环境，比较顺利很多，晚点会再写一篇使用react-native在mac上开发android和iOS的文章。"><a href="#本文主要介绍react-native在windows上开发android的环境搭建，前几天第一次搭建成功过，遇到一些坑，时间过了两天，可能有一些遗漏，有问题请自行搜索或在关于页面联系我。早前是使用mac开发iOS的环境，比较顺利很多，晚点会再写一篇使用react-native在mac上开发android和iOS的文章。" class="headerlink" title="本文主要介绍react native在windows上开发android的环境搭建，前几天第一次搭建成功过，遇到一些坑，时间过了两天，可能有一些遗漏，有问题请自行搜索或在关于页面联系我。早前是使用mac开发iOS的环境，比较顺利很多，晚点会再写一篇使用react native在mac上开发android和iOS的文章。"></a>本文主要介绍react native在windows上开发android的环境搭建，前几天第一次搭建成功过，遇到一些坑，时间过了两天，可能有一些遗漏，有问题请自行搜索或在关于页面联系我。早前是使用mac开发iOS的环境，比较顺利很多，晚点会再写一篇使用react native在mac上开发android和iOS的文章。</h6><h5 id="一、安装软件（建议先翻墙，自行搜索，鉴于某些原因，不做介绍）"><a href="#一、安装软件（建议先翻墙，自行搜索，鉴于某些原因，不做介绍）" class="headerlink" title="一、安装软件（建议先翻墙，自行搜索，鉴于某些原因，不做介绍）"></a>一、安装软件（建议先翻墙，自行搜索，鉴于某些原因，不做介绍）</h5><ul>
<li>1.cmder，命令行工具，<a href="http://cmder.net/" target="_blank" rel="noopener">下载</a></li>
<li><p>2.chocolatey，安装方法，命令行工具输入下面命令，使用管理员身份运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@powershell -NoProfile -ExecutionPolicy Bypass -Command &quot;iex ((new-object net.webclient).DownloadString(&apos;https://chocolatey.org/install.ps1&apos;))&quot; &amp;&amp; SET PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin</span><br></pre></td></tr></table></figure>
</li>
<li><p>3.listary，全局搜索工具，安装好后默认双击ctrl键（非必需）</p>
</li>
<li><p>4.Python 2，（我当时好像没有安装）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">choco install python2</span><br></pre></td></tr></table></figure>
</li>
<li><p>5.Node，对于react native不要使用cnpm</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">choco install nodejs.install</span><br><span class="line"></span><br><span class="line">更新nodejs，也可使用nvm管理多版本node</span><br><span class="line">choco upgrade nodejs.install</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.Yarn，替代npm的工具，加速node模块的下载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">choco install yarn</span><br><span class="line"></span><br><span class="line">也可通过npm安装，但需要配置镜像</span><br><span class="line">npm config set registry https://registry.npm.taobao.org --global</span><br><span class="line">npm config set disturl https://npm.taobao.org/dist --global</span><br><span class="line"></span><br><span class="line">yarn config set registry https://registry.npm.taobao.org --global</span><br><span class="line">yarn config set disturl https://npm.taobao.org/dist --global</span><br></pre></td></tr></table></figure>
</li>
<li><p>7.react-native-cli，全局的react native工具</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g react-native-cli</span><br></pre></td></tr></table></figure>
</li>
<li><p>8.Java Development Kit [JDK] 1.8，不要下载更高版本！使用chocolatey安装或是单独<a href="http://www.oracle.com/technetwork/cn/java/javase/downloads/jdk8-downloads-2133151-zhs.html" target="_blank" rel="noopener">下载</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">choco install jdk8</span><br><span class="line"></span><br><span class="line">通过javac -version查看版本和是否成功，需要配置环境变量</span><br></pre></td></tr></table></figure>
</li>
<li><p>9.Android Studio，需要配置环境变量</p>
</li>
<li>10.Genymotion，比起Android Studio自带的原装模拟器，Genymotion是一个性能更好的选择，但它只对个人用户免费。</li>
</ul>
<h5 id="二、安装运行"><a href="#二、安装运行" class="headerlink" title="二、安装运行"></a>二、安装运行</h5><ul>
<li><p>1.初始化并运行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">react-native init AwesomeProject</span><br><span class="line">cd AwesomeProject</span><br><span class="line">react-native run-android</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.选择真机或者模拟器，使用adb工具</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将android studio安装后的platform-tools添加到path环境变量里</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="三、打包apk"><a href="#三、打包apk" class="headerlink" title="三、打包apk"></a>三、打包apk</h5><ul>
<li><p>1.生成签名密钥，完成后将my-release-key.keystore文件移动到android/app下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.gradle配置，打开 android/app 下的 build.gradle 文件，添加如下代码，MYAPP_RELEASE_STORE_FILE 等变量在 gradle.properties 文件中可查看</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    ...</span><br><span class="line">    defaultConfig &#123; ... &#125;</span><br><span class="line">    signingConfigs &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            storeFile file(MYAPP_RELEASE_STORE_FILE)</span><br><span class="line">            storePassword MYAPP_RELEASE_STORE_PASSWORD</span><br><span class="line">            keyAlias MYAPP_RELEASE_KEY_ALIAS</span><br><span class="line">            keyPassword MYAPP_RELEASE_KEY_PASSWORD</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">              ...</span><br><span class="line">              signingConfig signingConfigs.release</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>3.打包应用。在 android/app/src/main/ 目录下创建 assets 目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">react-native bundle --platform android --dev false --entry-file index.android.js \ --bundle-output android/app/src/main/assets/index.android.bundle \ --assets-dest android/app/src/main/res/</span><br><span class="line"></span><br><span class="line">进入android目录，运行命令</span><br><span class="line">gradlew assembleRelease</span><br><span class="line"></span><br><span class="line">在 android/app/build/outputs/apk/ 下，找到打包生成的 app-release.apk</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="nbsp"><a href="#nbsp" class="headerlink" title="&nbsp;"></a>&nbsp;</h1><blockquote>
<p><em>参考文章，<a href="https://reactnative.cn/" target="_blank" rel="noopener">React Native 中文网</a></em></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2018/01/02/violentmonkey/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/02/violentmonkey/" itemprop="url">violentmonkey暴力猴的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-02T16:58:42+08:00">
                2018-01-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h6 id="暴力猴violentmonkey是一个可以在浏览器插入js脚本的chrome插件，能插入脚本能做的其他事情就不用多说了。本文主要讲自己写脚本，如果下载其他百度云下载或者屏蔽视频广告的脚本可以自行搜索。"><a href="#暴力猴violentmonkey是一个可以在浏览器插入js脚本的chrome插件，能插入脚本能做的其他事情就不用多说了。本文主要讲自己写脚本，如果下载其他百度云下载或者屏蔽视频广告的脚本可以自行搜索。" class="headerlink" title="暴力猴violentmonkey是一个可以在浏览器插入js脚本的chrome插件，能插入脚本能做的其他事情就不用多说了。本文主要讲自己写脚本，如果下载其他百度云下载或者屏蔽视频广告的脚本可以自行搜索。"></a>暴力猴violentmonkey是一个可以在浏览器插入js脚本的chrome插件，能插入脚本能做的其他事情就不用多说了。本文主要讲自己写脚本，如果下载其他百度云下载或者屏蔽视频广告的脚本可以自行搜索。</h6><ul>
<li>1.下载。chrome网上商店<a href="https://chrome.google.com/webstore/detail/violentmonkey/jinjaccalgkegednnccohejagnlnfdag?hl=zh-CN" target="_blank" rel="noopener">下载</a></li>
<li>2.找到插件并新建脚本</li>
<li><p>3.可以尝试书写js保存，浏览器打开的每个页面都会弹出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alert(&apos;test&apos;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>4.match参数可以匹配需要的网页域名，也可以通过location.origin匹配</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// ==UserScript==</span><br><span class="line">// @name Common</span><br><span class="line">// @namespace Violentmonkey Scripts</span><br><span class="line">// @match *://*/*</span><br><span class="line">// @grant none</span><br><span class="line">// ==/UserScript==</span><br></pre></td></tr></table></figure>
</li>
<li><p>5.异步脚本插入函数，jquery插入完成之后进行其他操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">function appendJquery (url, callback)&#123;</span><br><span class="line">  var script = document.createElement(&quot;script&quot;);</span><br><span class="line">  script.type = &quot;text/javascript&quot;;</span><br><span class="line">  if (script.readyState)&#123;</span><br><span class="line">    script.onreadystatechange = function () &#123; // ie</span><br><span class="line">      if (script.readyState == &quot;loaded&quot; || script.readyState == &quot;complete&quot;) &#123;</span><br><span class="line">        script.onreadystatechange = null;</span><br><span class="line">        callback();</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  else &#123;</span><br><span class="line">    //Others: Firefox, Safari, Chrome, and Opera</span><br><span class="line">    script.onload = function () &#123;</span><br><span class="line">      callback()</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  script.src = url;</span><br><span class="line">  document.body.appendChild(script);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.css插入函数，此处有es6的模板字符串，广告的隐藏很好用，常用在youtube上</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function appendStyle () &#123;</span><br><span class="line">  let styleEle = document.createElement(&apos;style&apos;)</span><br><span class="line">  styleEle.innerHTML = `</span><br><span class="line">    #__bs_notify__ &#123;</span><br><span class="line">      display: none !important;</span><br><span class="line">    &#125;</span><br><span class="line">  `</span><br><span class="line">  document.body.appendChild(styleEle)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h6 id="以前有个抓取珍某网美女帅哥高清图的需求，暴力猴是主要功臣。思路是定时点击每个美女item，跳到详情页后保存高清图地址到localstorage，有分类的需求需要字符串拼接，拿到所有地址后，通过node解析字符串下载保存图片。这个是纯浏览器客户端的操作，应该是可以通过身份模拟操作的，但我还是更喜欢客户端可视化的操作。之前没有做各个页面间的通信，是固定的时间间隔打开页面。如果优化的话，可以通过监听storage事件，这个方法有局限性。在亚马逊商家前后台页面通信时，有实践过websocket，当然ws强大很多。"><a href="#以前有个抓取珍某网美女帅哥高清图的需求，暴力猴是主要功臣。思路是定时点击每个美女item，跳到详情页后保存高清图地址到localstorage，有分类的需求需要字符串拼接，拿到所有地址后，通过node解析字符串下载保存图片。这个是纯浏览器客户端的操作，应该是可以通过身份模拟操作的，但我还是更喜欢客户端可视化的操作。之前没有做各个页面间的通信，是固定的时间间隔打开页面。如果优化的话，可以通过监听storage事件，这个方法有局限性。在亚马逊商家前后台页面通信时，有实践过websocket，当然ws强大很多。" class="headerlink" title="以前有个抓取珍某网美女帅哥高清图的需求，暴力猴是主要功臣。思路是定时点击每个美女item，跳到详情页后保存高清图地址到localstorage，有分类的需求需要字符串拼接，拿到所有地址后，通过node解析字符串下载保存图片。这个是纯浏览器客户端的操作，应该是可以通过身份模拟操作的，但我还是更喜欢客户端可视化的操作。之前没有做各个页面间的通信，是固定的时间间隔打开页面。如果优化的话，可以通过监听storage事件，这个方法有局限性。在亚马逊商家前后台页面通信时，有实践过websocket，当然ws强大很多。"></a>以前有个抓取珍某网美女帅哥高清图的需求，暴力猴是主要功臣。思路是定时点击每个美女item，跳到详情页后保存高清图地址到localstorage，有分类的需求需要字符串拼接，拿到所有地址后，通过node解析字符串下载保存图片。这个是纯浏览器客户端的操作，应该是可以通过身份模拟操作的，但我还是更喜欢客户端可视化的操作。之前没有做各个页面间的通信，是固定的时间间隔打开页面。如果优化的话，可以通过监听storage事件，这个方法有局限性。在亚马逊商家前后台页面通信时，有实践过websocket，当然ws强大很多。</h6>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://youyi.jingia.com/2017/12/30/markdown-write/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="老高">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="友谊同学">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/30/markdown-write/" itemprop="url">markdown常用基本写法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-30T09:44:26+08:00">
                2017-12-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>1.<strong>标题</strong>。使用 # ，共六级，类似 html 的 H 标签 (单独+空格)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 一级标签</span><br><span class="line">## 二级标签</span><br><span class="line">### 三级标签</span><br><span class="line">#### 四级标签</span><br><span class="line">##### 五级标签</span><br><span class="line">###### 六级标签</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.<strong>列表</strong>。文字前使用- (单独+空格)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">- 无序列表1</span><br><span class="line">- 无序列表2</span><br><span class="line">- 无序列表3</span><br><span class="line"></span><br><span class="line">- 1.有序列表</span><br><span class="line">- 2.有序列表</span><br><span class="line">- 3.有序列表</span><br></pre></td></tr></table></figure>
</li>
<li><p>3.<strong>链接</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[文字](https://www.baidu.com/)</span><br></pre></td></tr></table></figure>
</li>
<li><p>4.<strong>图片</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](https://img.wsweat.cn/logo.png)</span><br></pre></td></tr></table></figure>
</li>
<li><p>5.<strong>引用</strong>。文字前加&gt; (单独+空格)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; 一盏灯， 一片昏黄； 一简书， 一杯淡茶。</span><br><span class="line">&gt; 守着那一份淡定， 品读属于自己的寂寞。</span><br><span class="line">&gt; 保持淡定， 才能欣赏到最美丽的风景！</span><br><span class="line">&gt; 保持淡定， 人生从此不再寂寞。</span><br></pre></td></tr></table></figure>
</li>
<li><p>6.<strong>代码引用</strong>。使用```包裹（闭合）</p>
</li>
<li>7.<strong>粗体和斜体</strong>。用*包裹，1个为粗体，2个为粗体。（闭合+无空格）</li>
</ul>
<h1 id="nbsp"><a href="#nbsp" class="headerlink" title="&nbsp;"></a>&nbsp;</h1><blockquote>
<p><em>参考文章，<a href="https://www.jianshu.com/p/q81RER" target="_blank" rel="noopener">献给写作者的 Markdown 新手指南</a></em></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">老高</p>
              <p class="site-description motion-element" itemprop="description">WEB前端开发,前端开发博客专注于前端开发,分享前端开发资源和前端开发技术资讯等。</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">41</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">52</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">老高</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
